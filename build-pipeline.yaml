# Flutter build
variables:
  projectDirectory: '.'
trigger:
- master
jobs:
  - job: Android
    pool:
      vmImage: 'macOS-latest'
    steps:
    - task: FlutterInstall@0
      inputs:
        channel: 'stable'
        version: 'custom'
        customVersion: '2.8.0'
    
    - task: FlutterBuild@0
      inputs:
        target: apk
        projectDirectory: $(projectDirectory)
        buildFlavour: dev
        additionalArguments: -t lib/main_dev.dart
  
    # - task: AndroidSigning@3
    #   displayName: 'Signing and aligning APK file(s) **/*.apk'
    #   inputs:
    #     apkFiles: '**/*.apk'
    #     apksign: true
    #     apksignerKeystoreFile: key.jks
    #     apksignerKeystorePassword: $(keypassword)
    #     apksignerKeystoreAlias: $(key)
    #     apksignerKeyPassword: $(keypassword)
    # - task: CopyFiles@2
    #   inputs:
    #     contents: '**/*.apk'
    #     targetFolder: '$(build.artifactStagingDirectory)'
    # - task: PublishBuildArtifacts@1
